<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸàÿ±ŸÇ</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-main: #0f172a;
      --bg-card: #1e293b;
      --text-main: #f1f5f9;
      --text-muted: #94a3b8;
      --accent: #3b82f6;
      --button-bg: #334155;
      --button-hover: #475569;
      --teamA-bg: rgba(59,130,246,0.25); /* ŸÑŸÜÿß */
      --teamB-bg: rgba(239,68,68,0.25);  /* ŸÑŸáŸÖ */
    }

    body.light {
      --bg-main: #f8fafc;
      --bg-card: #ffffff;
      --text-main: #0f172a;
      --text-muted: #475569;
      --accent: #2563eb;
      --button-bg: #e2e8f0;
      --button-hover: #cbd5e1;
      --teamA-bg: rgba(59,130,246,0.2);
      --teamB-bg: rgba(239,68,68,0.2);
    }

    body {
      font-family: "Tajawal", system-ui, sans-serif;
      background: linear-gradient(180deg, var(--bg-main) 0%, var(--bg-card) 100%);
      color: var(--text-main);
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .container {
      width: 100%;
      max-width: 500px;
    }

    .card {
      background: var(--bg-card);
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
      padding: 20px;
      position: relative;
      transition: background 0.3s ease;
    }

    h1 {
      text-align: center;
      font-size: 25px;
      color: var(--accent);
      margin-bottom: 16px;
    }

    .theme-switch {
      position: absolute;
      top: 15px;
      right: 20px;
      width: 62px;
      height: 34px;
      background: var(--button-bg);
      border-radius: 30px;
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 1px;
      transition: background 0.25s ease;
      z-index: 10;
    }

    .theme-switch .circle {
      width: 28px;
      height: 26px;
      background: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 14px;
      transform: translateX(0);
      transition: transform 0.25s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }

    body.light .theme-switch .circle {
      transform: translateX(-30px);
    }

    .row {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 26px;
    }

    button {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.2s;
    }

    .primary {
      background: var(--accent);
      color: white;
    }

    .secondary {
      background: var(--button-bg);
      color: var(--text-main);
    }

    .primary:hover, .secondary:hover {
      background: var(--button-hover);
    }

    input[type=number] {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid var(--button-hover);
      text-align: center;
      background: var(--bg-main);
      color: var(--text-main);
      font-size: 16px;
    }

    .scores {
      display: flex;
      gap: 10px;
      justify-content: space-between;
      margin-top: 16px;
    }

    .score-box {
      flex: 1;
      background: var(--bg-main);
      border-radius: 12px;
      text-align: center;
      padding: 12px;
    }

    .team-name {
      font-weight: 600;
      color: var(--accent);
    }

    .total {
      font-size: 28px;
      font-weight: 700;
      margin-top: 4px;
    }

    ul {
      list-style: none;
      padding: 0;
      margin-top: 14px;
      max-height: 180px;
      overflow-y: auto;
    }

    li {
      margin-bottom: 6px;
      border-radius: 8px;
      padding: 8px 10px;
      font-size: 14px;
      color: var(--text-main);
      text-align: right;
    }

    li.teamA { background: var(--teamA-bg); }
    li.teamB { background: var(--teamB-bg); }

    .dealer-section {
      margin-top: 20px;
      text-align: center;
    }

    #arrowBtn {
      position: relative;
      background: var(--button-bg);
      color: var(--text-main);
      border: none;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      transition: background 0.3s ease;
    }

    #arrowIcon {
      font-size: 32px;
      transition: transform 0.28s cubic-bezier(.2,.9,.3,1);
    }

    #arrowBtn:hover { background: var(--button-hover); }

    .twitter-link {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      margin-top: 20px;
      font-weight: 600;
    }

    .twitter-link a {
      text-decoration: none;
      color: var(--accent);
      background: var(--button-bg);
      padding: 8px 14px;
      border-radius: 10px;
      transition: background 0.3s;
    }

    .twitter-link a:hover { background: var(--button-hover); }

  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="theme-switch" id="themeSwitch"><div class="circle" id="themeIcon">üåô</div></div>

      <h1>üìä ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸàÿ±ŸÇ</h1>

      <div class="row">
        <label>ÿßŸÑŸÅÿ±ŸäŸÇ</label>
        <button id="teamToggle" class="secondary">ŸÑŸÜÿß</button>

        <label>ÿßŸÑŸÜŸÇÿßÿ∑</label>
        <input id="pointsInput" type="number" min="0" max="700" value="152">

        <button id="addBtn" class="primary">‚ûï ÿ£ÿ∂ŸÅ ÿßŸÑŸÜŸÇÿßÿ∑</button>
      </div>

      <div class="scores">
        <div class="score-box">
          <div class="team-name">ŸÑŸáŸÖ</div>
          <div class="total" id="totalB">0</div>
        </div>
        <div class="score-box">
          <div class="team-name">ŸÑŸÜÿß</div>
          <div class="total" id="totalA">0</div>
        </div>
      </div>

      <div class="buttons">
        <button id="undoBtn" class="secondary">‚Ü©Ô∏è ÿ™ÿ±ÿßÿ¨ÿπ</button>
        <button id="resetBtn" class="secondary">üîÑ ÿ•ÿπÿßÿØÿ© ÿ∂ÿ®ÿ∑</button>

        <label style="display:flex;flex-direction:column;margin-top:6px;">
          ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ™ÿ≥ÿ¨ŸäŸÑ:
          <input id="limitInput" type="number" min="1" max="10000" value="700" />
        </label>
      </div>

      <div class="dealer-section">
        <div class="dealer-title">ŸÖÿ§ÿ¥ÿ± ŸÖŸàÿ≤ÿπ ÿßŸÑŸàÿ±ŸÇ</div>
        <button id="arrowBtn" aria-label="ŸÖÿ§ÿ¥ÿ± ŸÖŸàÿ≤ÿπ">
          <span id="arrowIcon">‚¨áÔ∏è</span>
        </button>
      </div>

      <ul id="history"></ul>

      <div class="twitter-link">
        <a href="https://x.com/IxYusi" target="_blank">ùïè IxYusi</a>
      </div>
    </div>
  </div>

  <script>
    const totalAEl = document.getElementById('totalA');
    const totalBEl = document.getElementById('totalB');
    const pointsInput = document.getElementById('pointsInput');
    const addBtn = document.getElementById('addBtn');
    const historyEl = document.getElementById('history');
    const undoBtn = document.getElementById('undoBtn');
    const resetBtn = document.getElementById('resetBtn');
    const limitInput = document.getElementById('limitInput');
    const arrowBtn = document.getElementById('arrowBtn');
    const arrowIcon = document.getElementById('arrowIcon');
    const themeSwitch = document.getElementById('themeSwitch');
    const themeIcon = document.getElementById('themeIcon');
    const teamToggle = document.getElementById('teamToggle');

    let totalA = 0, totalB = 0;
    let history = [];
    let currentTeam = 'teamA';
    let angle = 0;

    teamToggle.addEventListener('click', () => {
      if (currentTeam === 'teamA') {
        currentTeam = 'teamB';
        teamToggle.textContent = 'ŸÑŸáŸÖ';
        teamToggle.style.background = 'rgba(239,68,68,0.8)';
      } else {
        currentTeam = 'teamA';
        teamToggle.textContent = 'ŸÑŸÜÿß';
        teamToggle.style.background = 'rgba(59,130,246,0.8)';
      }
    });

    addBtn.addEventListener('click', () => {
      let pts = parseInt(pointsInput.value, 10);
      if (isNaN(pts) || pts < 0) return alert('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸÇŸäŸÖÿ© ÿµÿ≠Ÿäÿ≠ÿ©');
      const limit = parseInt(limitInput.value, 10) || 700;
      if (pts > limit) pts = limit;
      if (currentTeam === 'teamA') totalA += pts; else totalB += pts;
      history.push({ team: currentTeam, points: pts });
      render();
    });

    undoBtn.addEventListener('click', () => {
      if (history.length === 0) return;
      const last = history.pop();
      if (last.team === 'teamA') totalA -= last.points; else totalB -= last.points;
      render();
    });

    resetBtn.addEventListener('click', () => {
      if (!confirm('ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ÿπÿßÿØÿ© ÿ∂ÿ®ÿ∑ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ÿü')) return;
      totalA = totalB = 0;
      history = [];
      render();
    });

    arrowBtn.addEventListener('click', () => {
      angle -= 90;
      arrowIcon.style.transform = `rotate(${angle}deg)`;
    });

    function render() {
      totalAEl.textContent = totalA;
      totalBEl.textContent = totalB;
      historyEl.innerHTML = '';
      for (let i = history.length - 1; i >= 0; i--) {
        const it = history[i];
        const li = document.createElement('li');
        li.textContent = `${it.team === 'teamA' ? 'ŸÑŸÜÿß' : 'ŸÑŸáŸÖ'} +${it.points}`;
        li.classList.add(it.team);
        historyEl.appendChild(li);
      }
    }

    function setTheme(mode) {
      document.body.classList.toggle('light', mode === 'light');
      themeIcon.textContent = mode === 'light' ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', mode);
    }

    themeSwitch.addEventListener('click', () => {
      const current = document.body.classList.contains('light') ? 'light' : 'dark';
      setTheme(current === 'light' ? 'dark' : 'light');
    });

    setTheme(localStorage.getItem('theme') || 'dark');
    render();
  </script>
</body>
</html>
